---
listing:
- id: news
  contents:
    - "news/posts/*/index.qmd"
  max-items: 10
  sort: date desc
  type: grid
  grid-columns: 3
  categories: false
  sort-ui: false
  filter-ui: false
  fields: [title, description, date, reading-time, author]
  image-height: "200"
---

### News

::: {#news}

:::

[See all news &rarr;](news/)


```{=html}
<style>
  /* hide default Quarto grid once JS enhancement is active */
  #listing-news.enhanced-carousel .list.grid.quarto-listing-cols-3 {
    display: none !important;
  }

  #carousel-container {
    width: 100%;
    overflow: hidden;
    position: relative;
  }
  #carousel-container:focus {
    outline: 2px solid #007acc;
    outline-offset: 4px;
  }

  #carousel-track {
    display: flex;
    align-items: flex-start;
    transition: transform 0.7s cubic-bezier(0.25, 1, 0.5, 1);
    will-change: transform;
  }

  /* each slide sizing & height animation */
  #carousel-track > .g-col-1 {
    flex: 0 0 33.3333%; /* Default for desktop (3 columns) */
    padding: 1rem;
    box-sizing: border-box;
    display: block !important;
    transition: height 0.3s ease;
  }

  /* Tablet/iPad size: 2 columns */
  @media (max-width: 1024px) and (min-width: 769px) {
    #carousel-track > .g-col-1 {
      flex: 0 0 50%; /* 2 columns */
    }
  }

  /* Single-column on smaller mobile */
  @media (max-width: 768px) {
    #carousel-track > .g-col-1 {
      flex: 0 0 100%; /* 1 column */
    }
  }

  /* remove default card styling */
  #carousel-track > .g-col-1 .card {
    background: none;
    box-shadow: none;
    border: none;
  }

  /* trim default listing padding */
  .quarto-listing {
    padding-bottom: 0 !important;
  }
</style>

<script>
  document.addEventListener('DOMContentLoaded', function () {
    const listing = document.getElementById('listing-news');
    if (!listing) return;

    const originalItems = Array.from(
      listing.querySelectorAll('.list.grid.quarto-listing-cols-3 > .g-col-1')
    );
    const N_original = originalItems.length;

    // Helper to get items per view (cached on first call, recalculated on resize)
    function getItemsPerView() {
      const width = window.innerWidth;
      if (width <= 768) { // Mobile
        return 1;
      } else if (width > 768 && width <= 1024) { // Tablet/iPad
        return 2;
      } else { // Desktop
        return 3;
      }
    }

    // If there are too few items to scroll, just display them statically.
    // This check now uses the initial itemsPerView.
    if (N_original <= getItemsPerView()) {
      listing.classList.remove('enhanced-carousel');
      return;
    }

    // Add enhanced-carousel class only if the carousel is actually being initialized
    listing.classList.add('enhanced-carousel');

    let carouselContainer = document.getElementById('carousel-container');
    let carouselTrack = document.getElementById('carousel-track');

    // Initialize carousel elements if they don't exist (first load or after a full re-init on resize)
    if (!carouselContainer) {
      carouselContainer = document.createElement('div');
      carouselContainer.id = 'carousel-container';
      carouselContainer.setAttribute('role', 'region');
      carouselContainer.setAttribute('aria-live', 'polite');
      carouselContainer.setAttribute('tabindex', '0');

      carouselTrack = document.createElement('div');
      carouselTrack.id = 'carousel-track';
      carouselContainer.appendChild(carouselTrack);
      listing.parentNode.insertBefore(carouselContainer, listing.nextSibling);
    } else {
        // Clear existing children from track if re-initializing on resize
        while(carouselTrack.firstChild) {
            carouselTrack.removeChild(carouselTrack.firstChild);
        }
    }

    let itemsPerView = getItemsPerView(); // Initial calculation
    const numClones = Math.max(itemsPerView, 1);

    const clonedItems = [];
    for (let i = 0; i < numClones; i++) {
        const clone = originalItems[i % N_original].cloneNode(true);
        clone.setAttribute('aria-hidden', 'true');
        clonedItems.push(clone);
    }

    originalItems.forEach(i => {
        carouselTrack.appendChild(i);
        i.setAttribute('aria-hidden', 'false');
    });
    clonedItems.forEach(i => carouselTrack.appendChild(i));

    const allItems = [...originalItems, ...clonedItems];

    let currentIndex = 0;
    let shiftPercent = 100 / itemsPerView;
    const displayDuration = 2000;
    const transitionDuration = 700;

    function recalcHeight() {
      for (let i = currentIndex; i < Math.min(currentIndex + itemsPerView, allItems.length); i++) {
          allItems[i].style.height = 'auto';
      }

      const vis = allItems.slice(currentIndex, currentIndex + itemsPerView);
      const h = vis.length > 0 ? Math.max(...vis.map(i => i.offsetHeight)) : 0;
      vis.forEach(i => i.style.height = h + 'px');
      carouselContainer.style.height = h + 'px';
    }

    function updateSlide(idx, instant = false) {
      if (instant) {
        carouselTrack.style.transition = 'none';
      } else {
        carouselTrack.style.transition = `transform ${transitionDuration / 1000}s cubic-bezier(0.25, 1, 0.5, 1)`;
      }

      carouselTrack.style.transform = `translateX(-${idx * shiftPercent}%)`;
      recalcHeight();

      allItems.forEach((item, i) => {
          if (i >= currentIndex && i < currentIndex + itemsPerView) {
              item.setAttribute('aria-hidden', 'false');
          } else {
              item.setAttribute('aria-hidden', 'true');
          }
      });

      if (!instant && idx >= N_original) {
        setTimeout(() => {
          currentIndex = 0;
          updateSlide(currentIndex, true);
        }, transitionDuration);
      }
    }

    function nextSlide() {
      currentIndex++;
      updateSlide(currentIndex);
    }

    recalcHeight();
    updateSlide(0);

    // auto-play with pause on hover/focus/visibility
    let intervalId = setInterval(nextSlide, displayDuration);
    ['mouseenter','focusin'].forEach(e =>
      carouselContainer.addEventListener(e, () => clearInterval(intervalId))
    );
    ['mouseleave','focusout'].forEach(e =>
      carouselContainer.addEventListener(e, () => {
        clearInterval(intervalId);
        intervalId = setInterval(nextSlide, displayDuration);
      })
    );
    document.addEventListener('visibilitychange', () => {
      if (document.hidden) clearInterval(intervalId);
      else {
        clearInterval(intervalId);
        intervalId = setInterval(nextSlide, displayDuration);
      }
    });

    let resizeTimeout = null;
    window.addEventListener('resize', () => {
      clearTimeout(resizeTimeout);
      resizeTimeout = setTimeout(() => {
        const newItemsPerView = getItemsPerView();

        if (newItemsPerView !== itemsPerView || N_original <= newItemsPerView) {
            clearInterval(intervalId);
            carouselContainer.remove();
            document.dispatchEvent(new Event('DOMContentLoaded'));
            return;
        }

        itemsPerView = newItemsPerView;
        shiftPercent = 100 / itemsPerView;
        currentIndex = Math.min(currentIndex, N_original - 1);
        recalcHeight();
        updateSlide(currentIndex, true);
      }, 150);
    });
  });
</script>
```